<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AgoraLearn — Page QA</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      :root{
        --bg-gradient: linear-gradient(135deg,#1e0b2a 0%,#2e0651 40%,#0b0010 100%);
        --panel-bg: rgba(255,255,255,0.92);
        --muted: #9aa0a6;
      }
      html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Arial;color:#fff}
      body{
        background: var(--bg-gradient);
        width:420px;
        height:560px;
        box-sizing:border-box;
        display:flex;
        flex-direction:column;
      }

      .header{
        display:flex;
        align-items:center;
        gap:10px;
        padding:10px 14px;
        border-bottom:1px solid rgba(255,255,255,0.06);
      }
      .brand{font-weight:700;color:#fff;font-size:16px}

      .messages {
        flex:1;
        overflow:auto;
        padding:18px;
        display:flex;
        flex-direction:column;
        gap:14px;
      }
      .bubble {
        max-width:86%;
        padding:10px 14px;
        border-radius:18px;
        background:var(--panel-bg);
        color:#0b0b0b;
        box-shadow: 0 2px 6px rgba(0,0,0,0.25);
        align-self:flex-start;
        line-height:1.3;
      }
      .bubble.assistant{ align-self:flex-start; background:rgba(255,255,255,0.95) }
      .bubble.user{ align-self:flex-end; background:#e6f0ff; color:#031024 }

      .meta {
        margin-top:6px;
        font-size:11px;
        color:rgba(255,255,255,0.6);
      }

      .input-bar {
        display:flex;
        gap:8px;
        align-items:center;
        padding:12px;
        border-top:1px solid rgba(255,255,255,0.06);
      }
      .btn {
        background:#fff;
        color:#111;
        border:1px solid #ddd;
        padding:8px 10px;
        border-radius:8px;
        cursor:pointer;
        min-width:40px;
      }
      .btn:disabled{ opacity:0.5; cursor:not-allowed }

      .text-input {
        flex:1;
        border-radius:999px;
        padding:10px 14px;
        border:1px solid rgba(255,255,255,0.12);
        background:#fff;
        color:#000;
        outline:none;
        font-size:14px;
      }
      .status {
        font-size:12px;
        color:var(--muted);
        padding:6px 14px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="brand">AgoraLearn — Page QA</div>
    </div>

    <div id="messages" class="messages" aria-live="polite">
    </div>

    <div class="status" id="status">Loading page context...</div>

    <div class="input-bar">
      <input id="question" class="text-input" placeholder="Ask about the page..." />
      <button id="askBtn" class="btn">Send</button>
    </div>

    <!-- KaTeX (local files required) -->
    <link rel="stylesheet" href="katex.min.css">
    <script src="katex.min.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
